{"remainingRequest":"E:\\2020xian\\git-AntiFraud\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\index.js??vue-loader-options!E:\\2020xian\\git-AntiFraud\\src\\views\\limits-authority\\organization.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\2020xian\\git-AntiFraud\\src\\views\\limits-authority\\organization.vue","mtime":1609133899388},{"path":"E:\\2020xian\\git-AntiFraud\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\2020xian\\git-AntiFraud\\node_modules\\_babel-loader@8.2.2@babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\2020xian\\git-AntiFraud\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\2020xian\\git-AntiFraud\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGZldGNoT3JnTGlzdCxhZGRPcmcsZWRpdE9yZyxkZWxPcmcgfSBmcm9tICdAL2FwaS9saW1pdHMtYXV0aG9yaXR5JwpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAib3JnYW5pemF0aW9uIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdHJlZUxvYWRpbmc6ZmFsc2UsCiAgICAgIGFkZE9yZzp7CiAgICAgICAgYWRkSWQ6JycsCiAgICAgICAgYWRkTGFiZWw6JycKICAgICAgfSwKICAgICAgZmlsdGVyVGV4dDogJycsCiAgICAgIGZvcm1MYWJlbEFsaWduOnt9LAogICAgICBlZGl0T3JnOnsKICAgICAgICB0eXBlOicnLAogICAgICAgIGxhYmVsOicnCiAgICAgIH0sCiAgICAgIGlucHV0MjonJywKICAgICAgZGF0YTogWwogICAgICBdLAogICAgICBkZWZhdWx0UHJvcHM6IHsKICAgICAgICBjaGlsZHJlbjogJ2NoaWxkcmVuJywKICAgICAgICBsYWJlbDogJ2xhYmVsJwogICAgICB9CiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIGZpbHRlclRleHQodmFsKSB7CiAgICAgIHRoaXMuJHJlZnMudHJlZS5maWx0ZXIodmFsKTsKICAgIH0KICB9LAogIGNyZWF0ZWQoKXsKICAgICAgdGhpcy5mZXRjaExpc3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGZldGNoTGlzdCgpewogICAgICB0aGlzLnRyZWVMb2FkaW5nID0gdHJ1ZTsKICAgICAgZmV0Y2hPcmdMaXN0KCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5kYXRhID0gcmVzcG9uc2UKICAgICAgICB0aGlzLnRyZWVMb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKQogICAgICB9KQogICAgfSwKICAgIGZpbHRlck5vZGUodmFsdWUsIGRhdGEpIHsKICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuIHRydWU7CiAgICAgIHJldHVybiBkYXRhLmxhYmVsLmluZGV4T2YodmFsdWUpICE9PSAtMTsKICAgIH0sCiAgICBjbGlja05vZGUob2JqLCBub2RlLGRhdGEpewogICAgICB0aGlzLmZvcm1MYWJlbEFsaWduID0gb2JqOwogICAgICB0aGlzLmVkaXRPcmcubGFiZWwgPSBvYmoubGFiZWw7CiAgICAgIHRoaXMuZWRpdE9yZy50eXBlID0gb2JqLm9yZ1N0YXRlOwogICAgfSwKICAgIGRlbE9yZ0J1dHRvbigpewogICAgICBsZXQgcGFyYW0gPSB0aGlzLmZvcm1MYWJlbEFsaWduOwogICAgICBpZiAocGFyYW0uaWQ9PT11bmRlZmluZWQpewogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIHBhcmFtLmNoaWxkcmVuPVtdOwogICAgICBkZWxPcmcocGFyYW0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGxldCB0eXBlID0gcmVzcG9uc2UucmVzdWx0U3RhdGU7CiAgICAgICAgaWYodHlwZSA9PT0gJzEnKXsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5oiQ5YqfJywKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuZWRpdE9yZz17CiAgICAgICAgICAgIHR5cGU6JycsCiAgICAgICAgICAgIGxhYmVsOicnCiAgICAgICAgICB9OwogICAgICAgICAgdGhpcy5hZGRPcmc9ewogICAgICAgICAgICBhZGRJZDonJywKICAgICAgICAgICAgYWRkTGFiZWw6JycKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuZmV0Y2hMaXN0KCk7CiAgICAgICAgICB0aGlzLmZvcm1MYWJlbEFsaWduID0ge307CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGVycikKICAgICAgfSkKICAgIH0sCiAgICBlZGl0T3JnQnV0dG9uKCl7CiAgICAgIGxldCBwYXJhbSA9IHRoaXMuZm9ybUxhYmVsQWxpZ247CiAgICAgIGlmIChwYXJhbS5pZD09PXVuZGVmaW5lZCl7CiAgICAgICAgcmV0dXJuCiAgICAgIH1lbHNlIGlmICh0aGlzLmVkaXRPcmcubGFiZWwgPT09ICcnKXsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6ICfor7floavlhpnnu4Tnu4fmnLrmnoTlkI3np7AnLAogICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuCiAgICAgIH1lbHNlIGlmICh0aGlzLmVkaXRPcmcudHlwZSA9PT0gJycpewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogJ+ivt+Whq+WGmee7hOe7h+acuuaehOeKtuaAgScsCiAgICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgICB9KTsKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICBwYXJhbS5sYWJlbCA9IHRoaXMuZWRpdE9yZy5sYWJlbDsKICAgICAgcGFyYW0ub3JnU3RhdGUgPSB0aGlzLmVkaXRPcmcudHlwZTsKICAgICAgcGFyYW0uY2hpbGRyZW49W107CiAgICAgIGVkaXRPcmcocGFyYW0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGxldCB0eXBlID0gcmVzcG9uc2UucmVzdWx0U3RhdGU7CiAgICAgICAgaWYodHlwZSA9PT0gJzEnKXsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiAn5L+u5pS55oiQ5YqfJywKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuZmV0Y2hMaXN0KCk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGVycikKICAgICAgfSkKICAgIH0sCiAgICBhZGRPcmdCdXR0b24oKXsKICAgICAgbGV0IHBhcmFtID0gdGhpcy5mb3JtTGFiZWxBbGlnbjsKICAgICAgaWYgKHBhcmFtLmlkPT09dW5kZWZpbmVkKXsKICAgICAgICByZXR1cm4KICAgICAgfWVsc2UgaWYgKHRoaXMuYWRkT3JnLmFkZElkID09PSAnJyl7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiAn6K+35aGr5YaZ57uE57uH5py65p6E5qCH6K+GJywKICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgIH0pOwogICAgICAgIHJldHVybgogICAgICB9ZWxzZSBpZiAodGhpcy5hZGRPcmcuYWRkTGFiZWwgPT09ICcnKXsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6ICfor7floavlhpnnu4Tnu4fmnLrmnoTlkI3np7AnLAogICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgcGFyYW0uYWRkSWQgPSB0aGlzLmFkZE9yZy5hZGRJZDsKICAgICAgcGFyYW0uYWRkTGFiZWw9dGhpcy5hZGRPcmcuYWRkTGFiZWw7CiAgICAgIHBhcmFtLmNoaWxkcmVuPVtdOwogICAgICBhZGRPcmcocGFyYW0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGxldCB0eXBlID0gcmVzcG9uc2UucmVzdWx0U3RhdGU7CiAgICAgICAgaWYodHlwZSA9PT0gJzEnKXsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiAn5re75Yqg5oiQ5YqfJywKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuZmV0Y2hMaXN0KCk7CiAgICAgICAgICB0aGlzLmFkZE9yZz17CiAgICAgICAgICAgIGFkZElkOicnLAogICAgICAgICAgICBhZGRMYWJlbDonJwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpCiAgICAgIH0pCiAgICB9CiAgfSwKCn0K"},{"version":3,"sources":["organization.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"organization.vue","sourceRoot":"src/views/limits-authority","sourcesContent":["<template>\n  <el-container style=\"height: calc(100vh - 84px);\">\n    <el-aside width=\"300px\">\n      <el-input\n        placeholder=\"输入关键字进行过滤\"\n        v-model=\"filterText\">\n      </el-input>\n\n      <el-tree\n        class=\"filter-tree\"\n        v-loading=\"treeLoading\"\n        node-key=\"id\"\n        :data=\"data\"\n        :props=\"defaultProps\"\n        :expand-on-click-node=\"false\"\n        :filter-node-method=\"filterNode\"\n        @node-click=\"clickNode\"\n        ref=\"tree\">\n      </el-tree>\n    </el-aside>\n    <el-main>\n\n      <el-row style=\"margin-bottom: 10px;\">\n        <el-col :span=\"2\" style=\"text-align: right;\">\n          <span class=\"organization-span\">名称：</span>\n        </el-col>\n        <el-col :span=\"9\">\n          <el-input v-model=\"formLabelAlign.label\" readonly > </el-input>\n        </el-col>\n        <el-col :span=\"3\" style=\"text-align: right;\">\n          <span class=\"organization-span\">上级标识：</span>\n        </el-col>\n        <el-col :span=\"9\">\n          <el-input v-model=\"formLabelAlign.parentId\" readonly > </el-input>\n        </el-col>\n      </el-row>\n      <el-row>\n        <el-col :span=\"2\" style=\"text-align: right;\">\n          <span class=\"organization-span\">等级：</span>\n        </el-col>\n        <el-col :span=\"9\">\n          <el-input v-model=\"formLabelAlign.level\" readonly > </el-input>\n        </el-col>\n        <el-col :span=\"3\" style=\"text-align: right;\">\n          <span class=\"organization-span\">状态：</span>\n        </el-col>\n        <el-col :span=\"9\">\n          <el-input v-model=\"formLabelAlign.orgState\" readonly > </el-input>\n        </el-col>\n      </el-row>\n      <el-tabs type=\"border-card\" style=\"margin:20px 4%;height: calc(60vh);\">\n\n        <el-tab-pane label=\"增加组织机构\">\n          <div style=\"padding: 20px;\">\n            <el-row style=\"margin-bottom: 20px;\">\n              <el-col :span=\"3\">\n                <span class=\"organization-span\">组织机构标识：</span>\n              </el-col>\n              <el-col :span=\"20\">\n                <el-input\n                  v-model=\"addOrg.addId\">\n                </el-input>\n              </el-col>\n            </el-row>\n            <el-row style=\"margin-bottom: 20px;\">\n              <el-col :span=\"3\">\n                <span class=\"organization-span\">组织机构名称：</span>\n              </el-col>\n              <el-col :span=\"20\">\n                <el-input\n                  v-model=\"addOrg.addLabel\">\n                </el-input>\n              </el-col>\n            </el-row>\n            <el-row>\n              <el-col style=\"text-align: center\">\n                <el-button type=\"primary\" @click=\"addOrgButton\">提交</el-button>\n              </el-col>\n            </el-row>\n          </div>\n        </el-tab-pane>\n\n        <el-tab-pane label=\"修改组织机构\">\n          <div style=\"padding: 20px;\">\n            <el-row style=\"margin-bottom: 20px;\">\n              <el-col :span=\"3\">\n                <span class=\"organization-span\">组织机构名称：</span>\n              </el-col>\n              <el-col :span=\"20\">\n                <el-input\n                  v-model=\"editOrg.label\">\n                </el-input>\n              </el-col>\n            </el-row>\n            <el-row style=\"margin-bottom: 20px;\">\n              <el-col :span=\"3\">\n                <span class=\"organization-span\">组织机构状态：</span>\n              </el-col>\n              <el-col :span=\"20\">\n                <el-input\n                  v-model=\"editOrg.type\">\n                </el-input>\n              </el-col>\n            </el-row>\n            <el-row>\n              <el-col style=\"text-align: center\">\n                <el-button type=\"primary\" @click=\"editOrgButton\">提交</el-button>\n              </el-col>\n            </el-row>\n          </div>\n        </el-tab-pane>\n        <el-tab-pane label=\"删除组织机构\">\n          <div style=\"padding: 20px;\">\n            <el-row style=\"margin-bottom: 20px;\">\n              <el-col :span=\"3\">\n                <span class=\"organization-span\">组织机构名称：</span>\n              </el-col>\n              <el-col :span=\"20\">\n                <el-input\n                  v-model=\"formLabelAlign.label\" readonly>\n                </el-input>\n              </el-col>\n            </el-row>\n            <el-row>\n              <el-col style=\"text-align: center\">\n                <el-button type=\"danger\" @click=\"delOrgButton\">删除</el-button>\n              </el-col>\n            </el-row>\n          </div>\n        </el-tab-pane>\n      </el-tabs>\n\n    </el-main>\n  </el-container>\n</template>\n\n<script>\n    import { fetchOrgList,addOrg,editOrg,delOrg } from '@/api/limits-authority'\n    export default {\n        name: \"organization\",\n      data() {\n        return {\n          treeLoading:false,\n          addOrg:{\n            addId:'',\n            addLabel:''\n          },\n          filterText: '',\n          formLabelAlign:{},\n          editOrg:{\n            type:'',\n            label:''\n          },\n          input2:'',\n          data: [\n          ],\n          defaultProps: {\n            children: 'children',\n            label: 'label'\n          }\n        };\n      },\n      watch: {\n        filterText(val) {\n          this.$refs.tree.filter(val);\n        }\n      },\n      created(){\n          this.fetchList();\n      },\n      methods: {\n        fetchList(){\n          this.treeLoading = true;\n          fetchOrgList().then(response => {\n            this.data = response\n            this.treeLoading = false;\n          }).catch(err => {\n            console.log(err)\n          })\n        },\n        filterNode(value, data) {\n          if (!value) return true;\n          return data.label.indexOf(value) !== -1;\n        },\n        clickNode(obj, node,data){\n          this.formLabelAlign = obj;\n          this.editOrg.label = obj.label;\n          this.editOrg.type = obj.orgState;\n        },\n        delOrgButton(){\n          let param = this.formLabelAlign;\n          if (param.id===undefined){\n            return\n          }\n          param.children=[];\n          delOrg(param).then(response => {\n            let type = response.resultState;\n            if(type === '1'){\n              this.$message({\n                message: '删除成功',\n                type: 'success'\n              });\n              this.editOrg={\n                type:'',\n                label:''\n              };\n              this.addOrg={\n                addId:'',\n                addLabel:''\n              }\n              this.fetchList();\n              this.formLabelAlign = {};\n            }\n          }).catch(err => {\n            console.log(err)\n          })\n        },\n        editOrgButton(){\n          let param = this.formLabelAlign;\n          if (param.id===undefined){\n            return\n          }else if (this.editOrg.label === ''){\n            this.$message({\n              message: '请填写组织机构名称',\n              type: 'warning'\n            });\n            return\n          }else if (this.editOrg.type === ''){\n            this.$message({\n              message: '请填写组织机构状态',\n              type: 'warning'\n            });\n            return\n          }\n          param.label = this.editOrg.label;\n          param.orgState = this.editOrg.type;\n          param.children=[];\n          editOrg(param).then(response => {\n            let type = response.resultState;\n            if(type === '1'){\n              this.$message({\n                message: '修改成功',\n                type: 'success'\n              });\n              this.fetchList();\n            }\n          }).catch(err => {\n            console.log(err)\n          })\n        },\n        addOrgButton(){\n          let param = this.formLabelAlign;\n          if (param.id===undefined){\n            return\n          }else if (this.addOrg.addId === ''){\n            this.$message({\n              message: '请填写组织机构标识',\n              type: 'warning'\n            });\n            return\n          }else if (this.addOrg.addLabel === ''){\n            this.$message({\n              message: '请填写组织机构名称',\n              type: 'warning'\n            });\n            return\n          }\n          param.addId = this.addOrg.addId;\n          param.addLabel=this.addOrg.addLabel;\n          param.children=[];\n          addOrg(param).then(response => {\n            let type = response.resultState;\n            if(type === '1'){\n              this.$message({\n                message: '添加成功',\n                type: 'success'\n              });\n              this.fetchList();\n              this.addOrg={\n                addId:'',\n                addLabel:''\n              }\n            }\n          }).catch(err => {\n            console.log(err)\n          })\n        }\n      },\n\n    }\n</script>\n\n<style scoped>\n.organization-span{\n  line-height: 36px;\n}\n</style>\n"]}]}