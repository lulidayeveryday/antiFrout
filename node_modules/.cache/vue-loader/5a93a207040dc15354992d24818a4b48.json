{"remainingRequest":"E:\\2020xian\\git-AntiFraud\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\index.js??vue-loader-options!E:\\2020xian\\git-AntiFraud\\src\\views\\fraud-management\\high-risk-roaming.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"E:\\2020xian\\git-AntiFraud\\src\\views\\fraud-management\\high-risk-roaming.vue","mtime":1615791891162},{"path":"E:\\2020xian\\git-AntiFraud\\node_modules\\_css-loader@3.6.0@css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\2020xian\\git-AntiFraud\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\2020xian\\git-AntiFraud\\node_modules\\_postcss-loader@3.0.0@postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\2020xian\\git-AntiFraud\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\2020xian\\git-AntiFraud\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZWwtdGFibGUgLmNlbGx7CiAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKfQo="},{"version":3,"sources":["high-risk-roaming.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgOA;AACA;AACA","file":"high-risk-roaming.vue","sourceRoot":"src/views/fraud-management","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <div class=\"filter-container\">\n      <!--<div style=\"display:inline-block;padding-right: 20px;\">\n        <span style=\"padding: 0 8px 0 0;\">手机号码</span>\n        <el-input style=\"display: inline-block;width: 196px;\" v-model=\"DEVICE_NUMBER\" placeholder=\"请输入手机号码\"></el-input>\n      </div>-->\n      <div style=\"display:inline-block;padding-right: 20px;\">\n        <span style=\"padding: 0 8px 0 0;\">统计时间</span>\n        <el-date-picker\n          v-model=\"timeDay\"\n          type=\"date\"\n          placeholder=\"日期\">\n        </el-date-picker>\n      </div>\n      <div style=\"display:inline-block;padding-right: 20px;\">\n        <span style=\"padding: 0 8px 0 0;\">统计时间段</span>\n        <el-select v-model=\"time\" placeholder=\"请选择\">\n          <el-option key=\"sx1\" value=\"08:00-10:00\" label=\"08:00-10:00\"></el-option>\n          <el-option key=\"sx2\" value=\"10:01-12:00\" label=\"10:01-12:00\"></el-option>\n          <el-option key=\"sx3\" value=\"12:01-14:00\" label=\"12:01-14:00\"></el-option>\n          <el-option key=\"sx4\" value=\"14:01-16:00\" label=\"14:01-16:00\"></el-option>\n        </el-select>\n      </div>\n      <el-button class=\"filter-item\" style=\"margin: 0 7px 0;\" type=\"primary\" icon=\"el-icon-search\" @click=\"onSubmit\">\n        查询\n      </el-button>\n\n\n      <el-button :loading=\"downloadLoading\" style=\"margin:0 15px 0 7px;\" type=\"success\" icon=\"el-icon-document\" @click=\"handleDownload\">\n        导出表格\n      </el-button>\n    </div>\n\n\n\n    <el-table\n      key=\"tableKey\"\n      v-loading=\"loading\"\n      :data=\"list\"\n      border\n      fit\n      highlight-current-row\n      style=\"min-width: 100%;\"\n      @selection-change=\"handleSelectionChange\"\n    >\n\n      <el-table-column label=\"检测时间\" prop=\"CHECK_TIME\">\n      </el-table-column>\n      <el-table-column label=\"客户ID\" prop=\"USER_ID\" show-overflow-tooltip>\n      </el-table-column>\n      <el-table-column label=\"手机号码\" prop=\"DEVICE_NUMBER\" show-overflow-tooltip>\n      </el-table-column>\n      <el-table-column label=\"地市编码\" prop=\"AREA_ID\" show-overflow-tooltip>\n      </el-table-column>\n      <el-table-column label=\"所属地市\" prop=\"AREA_DESC\" show-overflow-tooltip>\n      </el-table-column>\n      <el-table-column label=\"发展渠道名称\" prop=\"CHANNEL_NAME\" show-overflow-tooltip>\n      </el-table-column>\n      <el-table-column label=\"发展人编码\" prop=\"DEVELOPER_ID\" show-overflow-tooltip>\n      </el-table-column>\n      <el-table-column label=\"发展人\" prop=\"DEVELOPER_NAME\" show-overflow-tooltip>\n      </el-table-column>\n      <el-table-column label=\"漫游地区号\" prop=\"VISIT_AREA_CODE\" show-overflow-tooltip>\n      </el-table-column>\n      <el-table-column label=\"漫游地\" prop=\"NAME\" show-overflow-tooltip>\n      </el-table-column>\n    </el-table>\n    <div class=\"block\" style=\"margin-top: 15px;\">\n      <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"pageCurrent\"\n        :page-sizes=\"[10, 20, 50, 100]\"\n        :page-size=\"pageSize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"pageTotal\">\n      </el-pagination>\n    </div>\n  </div>\n</template>\n\n<script>\n  import { highRiskRoamList,highRiskRoamDown } from '@/api/fraud-management'\n  import moment from 'moment'\n    export default {\n        name: \"high-risk-roaming\",\n      data() {\n        return {\n          list:[],\n          loading:false,\n          downloadLoading: false,\n          dialogFormVisible:false,\n          multipleSelection:[],\n          pageSize:10,//每页显示条数\n          pageCurrent:1,//当前页\n          pageTotal:0,\n          listDown:[],\n          time:'08:00-10:00',\n          timeDay:'',\n          DEVICE_NUMBER:''\n        }\n      },\n      created(){\n        this.timeDay = this.getDay(-0);\n        this.fetchList();\n      },\n      methods: {\n        getDay(day){\n          var today = new Date();\n\n          var targetday_milliseconds=today.getTime() + 1000*60*60*24*day;\n\n          today.setTime(targetday_milliseconds); //注意，这行是关键代码\n\n          var tYear = today.getFullYear();\n          var tMonth = today.getMonth();\n          var tDate = today.getDate();\n          tMonth = this.doHandleMonth(tMonth + 1);\n          tDate = this.doHandleMonth(tDate);\n          return tYear+\"-\"+tMonth+\"-\"+tDate;\n        },\n        doHandleMonth(month){\n          var m = month;\n          if(month.toString().length == 1){\n            m = \"0\" + month;\n          }\n          return m;\n        },\n        fetchList(){\n          this.loading = true;\n          let param = {};\n          param.start = (this.pageCurrent-1)*this.pageSize;\n          param.length = this.pageSize;\n          param.time = this.time;\n          let timeDay = this.timeDay;\n          if(timeDay!=''){\n            let endTime = moment(timeDay).format('YYYY-MM-DD');\n            param.endTime=endTime;\n          }else {\n            param.endTime='';\n          }\n\n          param.DEVICE_NUMBER = this.DEVICE_NUMBER;\n          highRiskRoamList(param).then(response => {\n            this.list = response.data\n            this.pageTotal = response.total;\n            this.loading = false;\n            highRiskRoamDown(param).then(response => {\n              this.listDown = response\n            }).catch(err => {\n              console.log(err)\n            })\n          }).catch(err => {\n            console.log(err)\n            this.loading = false;\n          })\n\n\n        },\n        onSubmit() {\n          this.fetchList();\n        },\n        handleDownload() {\n          this.downloadLoading = true\n          import('@/vendor/Export2Excel').then(excel => {\n            const tHeader = [\n              '检测时间',\n              '客户ID',\n              '手机号码',\n              '地市编码',\n              '所属地市',\n              '发展渠道名称',\n              '发展人编码',\n              '发展人',\n              '漫游地区号',\n              '漫游地'\n            ]\n            const filterVal = [\n              'CHECK_TIME',\n              'USER_ID',\n              'DEVICE_NUMBER',\n              'AREA_ID',\n              'AREA_DESC',\n              'CHANNEL_NAME',\n              'DEVELOPER_ID',\n              'DEVELOPER_NAME',\n              'VISIT_AREA_CODE',\n              'NAME'\n            ]\n            const data = this.formatJson(filterVal)\n            excel.export_json_to_excel({\n              header: tHeader,\n              data,\n              filename: '高危漫游话务异常筛选'\n            })\n            this.downloadLoading = false\n          })\n        },\n        formatJson(filterVal) {\n          return this.listDown.map(v => filterVal.map(j => {\n            if (j === 'timestamp') {\n              return parseTime(v[j])\n            } else {\n              return v[j]\n            }\n          }))\n        },\n        handleSelectionChange(val) {\n          this.multipleSelection = val;\n        },\n        handleSizeChange(val) {\n          this.pageSize=val;\n          this.fetchList();\n        },\n        handleCurrentChange(val) {\n          this.pageCurrent=val;\n          this.fetchList();\n        },\n      }\n    }\n</script>\n\n<style>\n  .el-table .cell{\n    white-space: nowrap;\n  }\n</style>\n"]}]}