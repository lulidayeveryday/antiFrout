{"remainingRequest":"E:\\2020xian\\git-AntiFraud\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\index.js??vue-loader-options!E:\\2020xian\\git-AntiFraud\\src\\views\\limits-authority\\user.vue?vue&type=style&index=0&id=d9662c7c&scoped=true&lang=css&","dependencies":[{"path":"E:\\2020xian\\git-AntiFraud\\src\\views\\limits-authority\\user.vue","mtime":1610330659087},{"path":"E:\\2020xian\\git-AntiFraud\\node_modules\\_css-loader@3.6.0@css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\2020xian\\git-AntiFraud\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\2020xian\\git-AntiFraud\\node_modules\\_postcss-loader@3.0.0@postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\2020xian\\git-AntiFraud\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\2020xian\\git-AntiFraud\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZWwtZm9ybS1pdGVtewogIG1hcmdpbi1ib3R0b206IDEwcHg7Cn0KLmVsLXRhYmxlIC5jZWxsewogIHdoaXRlLXNwYWNlOiBub3dyYXA7Cn0K"},{"version":3,"sources":["user.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiZA;AACA;AACA;AACA;AACA;AACA","file":"user.vue","sourceRoot":"src/views/limits-authority","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <div class=\"filter-container\">\n      <span>工号&nbsp;&nbsp;</span><el-input v-model=\"screen.number\" placeholder=\"工号\" style=\"width: 200px;\" class=\"filter-item\" />\n      <el-button class=\"filter-item\" style=\"margin-left: 15px;\" type=\"primary\" icon=\"el-icon-search\" @click=\"onSubmit\">\n        查询\n      </el-button>\n      <el-button class=\"filter-item\" type=\"success\" icon=\"el-icon-plus\" @click=\"addUser = true\" style=\"float: right\">\n        新增用户\n      </el-button>\n    </div>\n    <el-table\n      :data=\"list\"\n      border\n      fit\n      highlight-current-row\n      style=\"width: 100%;\"\n    >\n      <el-table-column label=\"用户名\" align=\"center\" show-overflow-tooltip>\n        <template slot-scope=\"{row}\">\n          <span>{{ row.userName}}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"组织机构\" min-width=\"150px\" show-overflow-tooltip>\n        <template slot-scope=\"{row}\">\n          <span>{{ row.prvoName }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"角色\" align=\"center\" show-overflow-tooltip>\n        <template slot-scope=\"{row}\">\n          <span>{{ row.roleName }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"状态\" align=\"center\" show-overflow-tooltip>\n        <template slot-scope=\"{row}\">\n          <!--<span>{{ row.state }}</span>-->\n          <span v-if=\"row.state==='1'\">启用</span>\n          <span v-else>停用</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"详情\" align=\"center\" class-name=\"small-padding fixed-width\" show-overflow-tooltip>\n        <template slot-scope=\"{row}\">\n          <el-button type=\"primary\" size=\"mini\" @click=\"handleUpdate(row)\">\n            编辑\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <div class=\"block\" style=\"margin-top: 15px;\">\n      <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"pageCurrent\"\n        :page-sizes=\"[10, 20, 50, 100]\"\n        :page-size=\"pageSize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"pageTotal\">\n      </el-pagination>\n    </div>\n\n    <el-dialog :title=\"'修改用户信息'\" :visible.sync=\"dialogFormVisible\" style=\"margin-top: -9vh;\">\n      <el-form ref=\"dataForm\"  :rules=\"rules\" :model=\"temp\" label-position=\"left\" label-width=\"100px\" size=\"mini\" style=\" margin-right:50px;margin-left:50px;\">\n\n        <el-form-item label=\"登录工号\">\n          <span>{{temp.loginId\t}}</span>\n\n          <el-button type=\"primary\" @click=\"resetPass\" style=\"float: right;\">\n            重置密码\n          </el-button>\n        </el-form-item>\n        <el-form-item label=\"姓名\" prop=\"userName\">\n          <el-input v-model=\"temp.userName\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"性别\">\n          <el-radio-group v-model=\"temp.sex\">\n            <el-radio label=\"F\">男</el-radio>\n            <el-radio label=\"M\">女</el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item label=\"年龄\">\n          <el-input v-model=\"temp.age\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"联系电话\">\n          <el-input v-model=\"temp.telephone\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"邮箱\">\n          <el-input v-model=\"temp.emall\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"身份证\">\n          <el-input v-model=\"temp.idCard\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"联系地址\">\n          <el-input v-model=\"temp.userAddress\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"组织级别\">\n          {{temp.orgLevel}}\n        </el-form-item>\n        <el-form-item label=\"组织机构\">\n          {{temp.prvoName}}\n        </el-form-item>\n        <el-form-item label=\"渠道\">\n          {{temp.organName}}\n        </el-form-item>\n        <el-form-item label=\"角色\">\n          <el-select v-model=\"temp.roleId\" placeholder=\"请选择角色\">\n            <el-option v-for=\"(item,i) in roleList\" :key=\"item.roleId\" :label=\"item.roleName\" :value=\"item.roleId\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"备注\">\n          <el-input v-model=\"temp.memo\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"创建时间\">\n          {{temp.createDate}}\n        </el-form-item>\n        <el-form-item label=\"状态\">\n          <el-radio-group v-model=\"temp.state\">\n            <el-radio label=\"1\">启用</el-radio>\n            <el-radio label=\"0\">停用</el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item label=\"稽核管理标识\">\n          <el-radio-group v-model=\"temp.jhFlag\">\n            <el-radio label=\"0\">否</el-radio>\n            <el-radio label=\"1\">是</el-radio>\n          </el-radio-group>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\">\n          关闭\n        </el-button>\n        <el-button type=\"primary\" @click=\"editUser\">\n          保存\n        </el-button>\n      </div>\n    </el-dialog>\n\n    <el-dialog :title=\"'新增用户'\" :visible.sync=\"addUser\"  style=\"margin-top: -9vh;\">\n      <el-form ref=\"dataFormAdd\" autocomplete=\"new-password\" :rules=\"rules\" :model=\"addUserInfo\" label-position=\"left\" label-width=\"100px\" size=\"mini\" style=\" margin-right:50px;margin-left:50px;\">\n\n        <el-form-item label=\"登录工号\" prop=\"loginId\">\n          <el-input v-model=\"addUserInfo.loginId\"  autocomplete=\"new-password\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"姓名\" prop=\"userName\">\n          <el-input v-model=\"addUserInfo.userName\"  autocomplete=\"new-password\" ></el-input>\n        </el-form-item>\n        <el-form-item label=\"密码\" prop=\"password\">\n          <el-input v-model=\"addUserInfo.password\" autocomplete=\"new-password\" show-password></el-input>\n        </el-form-item>\n        <el-form-item label=\"性别\">\n          <el-radio-group v-model=\"addUserInfo.sex\">\n            <el-radio label=\"F\">男</el-radio>\n            <el-radio label=\"M\">女</el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item label=\"年龄\">\n          <el-input v-model=\"addUserInfo.age\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"联系电话\">\n          <el-input v-model=\"addUserInfo.telephone\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"邮箱\">\n          <el-input v-model=\"addUserInfo.emall\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"身份证\">\n          <el-input v-model=\"addUserInfo.idCard\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"联系地址\">\n          <el-input v-model=\"addUserInfo.userAddress\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"组织级别\">\n          <el-input v-model=\"addUserInfo.orgLevel\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"组织机构\">\n          <el-input v-model=\"addUserInfo.prvoName\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"渠道\">\n          <el-input v-model=\"addUserInfo.chaneelId\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"角色\">\n          <el-select v-model=\"addUserInfo.roleId\" placeholder=\"请选择角色\">\n            <el-option v-for=\"(item,i) in roleList\" :key=\"item.roleId\" :label=\"item.roleName\" :value=\"item.roleId\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"备注\">\n          <el-input v-model=\"addUserInfo.memo\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"稽核管理标识\">\n          <el-radio-group v-model=\"addUserInfo.jhFlag\">\n            <el-radio label=\"0\">否</el-radio>\n            <el-radio label=\"1\">是</el-radio>\n          </el-radio-group>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"addUser = false\">\n          关闭\n        </el-button>\n        <el-button type=\"primary\" @click=\"addUsers\">\n          新增\n        </el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  import { fetchuserList,fetcheditUser,fetchRole,resetPass,addUsers } from '@/api/limits-authority'\n  import axios from 'axios'\n    export default {\n        name: \"user\",\n      data() {\n        return {\n          rules:{\n            loginId:[\n              { required: true, message: '请填写登录工号', trigger: 'blur' }\n            ],\n            userName:[\n              { required: true, message: '请填写姓名', trigger: 'blur' }\n            ],\n            password:[\n              { required: true, message: '请填写密码', trigger: 'blur' }\n            ],\n          },\n          addUser:false,\n          screen: {\n            number: ''\n          },\n          currentPage: 1,\n          list:[],\n          roleList:[\n            {\n              \"auths\": [],\n              \"createDate\": \"2017-09-07\",\n              \"createPersion\": \"超级管理员\",\n              \"memo\": null,\n              \"ord\": null,\n              \"roleId\": \"2c90bfc35e5a45fc015e5a45fc870000\",\n              \"roleName\": \"省分管理员\",\n              \"updateDate\": \"2020-12-02\",\n              \"updatePersion\": \"2c90bfc35e27f4a2015e27f4a2b00000\"\n            },\n            {\n              \"auths\": [],\n              \"createDate\": \"2020-12-14\",\n              \"createPersion\": \"超级管理员\",\n              \"memo\": \"西安管理员\",\n              \"ord\": null,\n              \"roleId\": \"766091ca01766091caf30000\",\n              \"roleName\": \"西安管理员\",\n              \"updateDate\": null,\n              \"updatePersion\": null\n            },\n            {\n              \"auths\": [],\n              \"createDate\": \"2017-08-23\",\n              \"createPersion\": \"超级管理员\",\n              \"memo\": \"拥有所有权限\",\n              \"ord\": null,\n              \"roleId\": \"2c90bfc35e0ca664015e0ca6649d0000\",\n              \"roleName\": \"超级管理员\",\n              \"updateDate\": \"2020-09-21\",\n              \"updatePersion\": \"2c90bfc35e27f4a2015e27f4a2b00000\"\n            },\n            {\n              \"auths\": [],\n              \"createDate\": \"2019-05-24\",\n              \"createPersion\": \"超级管理员\",\n              \"memo\": null,\n              \"ord\": null,\n              \"roleId\": \"8a8ae4ed6ae801c9016ae801c9040000\",\n              \"roleName\": \"地市管理员\",\n              \"updateDate\": \"2020-12-14\",\n              \"updatePersion\": \"2c90bfc35e27f4a2015e27f4a2b00000\"\n            }\n          ],\n          temp:{},\n          dialogFormVisible:false,\n          pageSize:10,//每页显示条数\n          pageCurrent:1,//当前页\n          pageTotal:0,\n          addUserInfo:{\n          }\n        }\n      },\n      watch:{\n        addUser(val){\n          this.addUserInfo = {};\n        }\n      },\n      created(){\n          /*替换*/\n          this.fetchList();\n          this.fetchRole();\n\n\n      },\n      methods: {\n        addUsers(){\n          this.$refs['dataFormAdd'].validate((valid) => {\n            if (valid) {\n              let param = this.addUserInfo;\n              addUsers(param).then(response => {\n                if(response.resultState==='1'){\n                  this.$message({\n                    message: '新增用户成功',\n                    type: 'success'\n                  });\n                  this.addUser = false;\n                  this.addUserInfo = {};\n                  this.fetchList();\n                }\n              }).catch(err => {\n                console.log(err)\n              })\n            } else {\n              return false;\n            }\n          });\n\n        },\n        onSubmit() {\n          this.fetchList();\n        },\n        /*重置密码*/\n        resetPass(){\n          let param = this.temp;\n          resetPass(param).then(response => {\n            if(response.resultState==='1'){\n              this.$message({\n                message: '重置密码成功',\n                type: 'success'\n              });\n            }\n          }).catch(err => {\n            console.log(err)\n          })\n        },\n        /*编辑时角色列表*/\n        fetchRole(){\n          fetchRole().then(response => {\n            this.roleList = response;\n          }).catch(err => {\n            console.log(err)\n          })\n        },\n        fetchList(){\n          // let param = this.screen;\n          let param = {};\n          param.start = (this.pageCurrent-1)*this.pageSize;\n          param.length = this.pageSize;\n          param.jsonStr = this.screen.number;\n          fetchuserList(param).then(response => {\n            this.list = response.data\n            this.pageTotal = response.total;\n          }).catch(err => {\n            console.log(err)\n          })\n        },\n        editUser(){\n          this.$refs['dataForm'].validate((valid) => {\n            if (valid) {\n              let param = this.temp;\n              fetcheditUser(param).then(response => {\n                if(response.resultState==='1'){\n                  this.$message({\n                    message: '保存成功',\n                    type: 'success'\n                  });\n                  this.dialogFormVisible = false\n                  this.fetchList();\n                }else {\n                  this.$message.error('保存失败');\n                }\n              }).catch(err => {\n                console.log(err)\n              })\n              this.fetchList();\n            } else {\n              return false;\n            }\n          });\n        },\n        handleSizeChange(val) {\n          this.pageSize=val;\n          this.fetchList();\n        },\n        handleCurrentChange(val) {\n          this.pageCurrent=val;\n          this.fetchList();\n        },\n        handleUpdate(row){\n          this.dialogFormVisible = true;\n          this.temp = row;\n        }\n      }\n    }\n</script>\n\n<style scoped>\n.el-form-item{\n  margin-bottom: 10px;\n}\n.el-table .cell{\n  white-space: nowrap;\n}\n</style>\n"]}]}